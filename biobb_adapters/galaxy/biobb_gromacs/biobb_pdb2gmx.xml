<tool id="biobb_gromacs_pdb2gmx" name="Pdb2gmx" version="4.2.0" >
  <description>Wrapper class for the GROMACS pdb2gmx module.</description>

  <requirements>
    <requirement type="package" version="4.2.0">biobb_gromacs</requirement>
  </requirements>

  <command detect_errors="exit_code"><![CDATA[

    ln -s $input_pdb_path ./input_pdb_path.$input_pdb_path.ext;
    #if str($config_json) != 'None':
      ln -s $config_json ./config_json.$config_json.ext;
    #end if

    pdb2gmx

    #if str($config_json) != 'None':
      --config ./config_json.$config_json.ext
    #end if

    --input_pdb_path ./input_pdb_path.$input_pdb_path.ext
    --output_gro_path $outname_output_gro_path
    --output_top_zip_path $outname_output_top_zip_path
    ;

    if test -f $outname_output_gro_path; then mv $outname_output_gro_path $output_gro_path; fi;
    if test -f $outname_output_top_zip_path; then mv $outname_output_top_zip_path $output_top_zip_path; fi;

    ]]>
  </command>

  <inputs>
    <param format="pdb" name="input_pdb_path" type="data" label="PDB input file" help="Path to the input PDB file. Format: [input].pdb"/>
    <param name="outname_output_gro_path" type="text" optional="False" label="output GRO name" help="Path to the output GRO file Format: [output].gro "/>
    <param name="outname_output_top_zip_path" type="text" optional="False" label="output ZIP name" help="Path the output TOP topology in zip format Format: [output].zip "/>
    <param name="config_json" type="data" format="json" optional="True" label="Configuration file" help="File containing tool settings. See below for the syntax"/>
  </inputs>

  <outputs>
    <data name="output_gro_path" format="gro" />
    <data name="output_top_zip_path" format="zip" />
  </outputs>

  <tests>
    <test>
      <param name="config_json" value="config_pdb2gmx.json" ftype="json" />
      <param name="input_pdb_path" value="input_pdb2gmx.pdb" ftype="pdb" />
      <param name="outname_output_gro_path" value="output_pdb2gmx.gro" />
      <param name="outname_output_top_zip_path" value="output_pdb2gmx.zip" />
      <output name="output_gro_path" file="output_pdb2gmx.gro" />
      <output name="output_top_zip_path" file="output_pdb2gmx.zip" compare="sim_size"/>
    </test>
  </tests>

  <help>
.. class:: infomark

Check the syntax for the tool parameters at the original library documentation: https://biobb_gromacs.readthedocs.io/en/latest

-----

.. image:: http://mmb.irbbarcelona.org/biobb/assets/layouts/layout3/img/logo.png
    :width: 150

**https://mmb.irbbarcelona.org/biobb**

.. image:: https://bioexcel.eu/wp-content/uploads/2019/08/Bioexcel_logo_no_subheading_660px.png
        :width: 150

**https://bioexcel.eu**
  </help>

  <citations>
    <citation type="bibtex">
        @misc{githubbiobb,
        author = {Andrio P, Bayarri, G., Hospital A, Gelpi JL},
        year = {2019-21},
        title = {biobb: BioExcel building blocks },
        publisher = {GitHub},
        journal = {GitHub repository},
        url = {https://github.com/bioexcel/biobb_gromacs},
        }
    </citation>
    <citation type="doi">10.1038/s41597-019-0177-4</citation>
  </citations>

</tool>